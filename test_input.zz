module TestInput;

static fn i32 puts(*i8 s);
static fn *i8 realloc(*i8 ptr, i64 size);

class String {
    *i8 buffer;
    i64 length;
    i64 allocated_length;

    fn *i8 c_str() {
        return self.buffer;
    }

    static fn String fromBytes(*i8 buffer, i64 length) {
        let rc String;
        let i i64;

        rc = new String;
        rc.length = length;
        rc.allocated_length = length + 1;
        rc.buffer = calloc(length + 1, 1);

        i = 0;
        while i < length {
            rc.buffer*[i] = buffer*[i];
            i = i + 1;
        }

        return rc;
    }
}

static fn i32 main() {
    puts("Hello, World!".c_str());
    return 0;
}

