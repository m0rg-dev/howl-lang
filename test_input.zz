module TestInput;

class String {
    *i8 buffer;

    fn void allocate(i64 size) {
        self.buffer = calloc(size, 1);
        return;
    }

    fn void setCharacter(i64 offset, i8 c) {
        self.buffer*[offset] = c;
        return;
    }

    fn *i8 c_str() {
        return self.buffer;
    }
}

static fn i32 main() {
    let s String;
    s = new String;
    s.allocate(13);
    s.setCharacter(0, 72);
    s.setCharacter(1, 101);
    s.setCharacter(2, 108);
    s.setCharacter(3, 108);
    s.setCharacter(4, 111);
    s.setCharacter(5, 44);
    s.setCharacter(6, 32);
    s.setCharacter(7, 87);
    s.setCharacter(8, 111);
    s.setCharacter(9, 114);
    s.setCharacter(10, 108);
    s.setCharacter(11, 100);
    s.setCharacter(12, 33);
    puts(s.c_str());
    return 0;
}

static fn i32 puts(*i8 s);
